<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deck of Cards</title>
    <link rel="stylesheet" href="./CSS/style.css">
</head>
<body>
    <h1>Welcome to my Deck of Cards</h1>
    <h2>Match your wits with kings and bards</h2>
    
    <button id="createDeck">Create New Deck</button>
    <button id="drawCard">Draw a Card</button>
    <div id="cardContainer"></div>
    <button id="shuffleDeck">Shuffle Deck</button>
    <button id="reshuffleDeck">Reshuffle Discards</button>

    <p id="output"></p>

    <script>
        let deckId = null;

        document.getElementById('createDeck').addEventListener('click', async () => {
            const response = await fetch('/temp/deck', { method: 'POST' });
            const data = await response.json();
            deckId = data.deckId; // Lagre deckId for videre bruk
            document.getElementById('output').innerText = `New deck created with ID: ${deckId}`;
        });


        document.getElementById('drawCard').addEventListener('click', async () => {
            const response = await fetch('/temp/deck/draw/1');  // Endre 1 til riktig deckId
            const card = await response.json();
            
            const cardContainer = document.getElementById('cardContainer');
            cardContainer.innerHTML = `
                <div class="card ${card.suit}">
                    <div class="value">${card.value}</div>
                    <div class="suit">${getSuitSymbol(card.suit)}</div>
                </div>
            `;
        });

        function getSuitSymbol(suit) {
            switch (suit) {
                case 'hearts': return '♥';
                case 'diamonds': return '♦';
                case 'clubs': return '♣';
                case 'spades': return '♠';
                default: return '';
            }
        };

        document.getElementById('shuffleDeck').addEventListener('click', async () => {
            if (!deckId) {
                alert("Please create a deck first!");
                return;
            }
            const response = await fetch(`/temp/deck/shuffle/${deckId}`, { method: 'PATCH' });
            document.getElementById('output').innerText = `Deck shuffled successfully!`; 
        });

        document.getElementById('reshuffleDeck').addEventListener('click', async () => {
        if (!deckId) {
            alert("Please create a deck first!");
            return;
        }
        const response = await fetch(`/temp/deck/reshuffle/${deckId}`, { method: 'PATCH' });
        const result = await response.json();
        document.getElementById('output').innerText = result.message;
    });

    </script>
</body>
</html>